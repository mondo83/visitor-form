<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>来訪者受付フォーム</title>
  <style>
    :root {
      --primary-color: #006699;
      --bg-color: #f5f8fa;
      --card-bg: #fff;
      --border-radius: 8px;
      --spacing: 1rem;
    }
    * { box-sizing: border-box; }

    /* ──────────────── 追加部分 ──────────────── */
    input, textarea {
      -webkit-user-select: text;
      user-select: text;
    }
    /* ───────────────────────────────────────── */

    body {
      margin: 0;
      padding: var(--spacing);
      background: var(--bg-color);
      font-family: 'Helvetica Neue', Arial, sans-serif;
    }
    main {
      max-width: 600px;
      margin: auto;
      background: var(--card-bg);
      padding: calc(var(--spacing) * 1.5);
      border-radius: var(--border-radius);
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    /* 見出し */
    h1 {
      margin: 0 0 var(--spacing);
      text-align: center;
      background: var(--primary-color);
      color: #fff;
      padding: 0.75em;
      border-radius: var(--border-radius);
      font-size: 1.5rem;
    }
    #langSwitch {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin-bottom: var(--spacing);
    }
    #langSwitch button {
      background: none;
      border: none;
      color: var(--primary-color);
      cursor: pointer;
      font-size: 0.9rem;
    }

    .facility-display {
      text-align: center;
      margin-bottom: var(--spacing);
      color: var(--primary-color);
      font-weight: bold;
    }
    label {
      display: block;
      margin-top: var(--spacing);
      font-weight: bold;
    }
    input, select, button {
      padding: 0.5em;
      margin-top: 0.25em;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 1rem;
    }
    input, select, button {
      width: 100%;
    }

    .datetime-row {
      display: flex;
      gap: 0.5em;
      margin-top: var(--spacing);
    }
    .datetime-field { flex: 1; }

    .name-pair {
      display: flex;
      gap: 0.5em;
      margin-top: 0.5em;
    }
    .name-pair input {
      flex: 1 1 auto;
      min-width: 0;
      width: auto;
    }

    .purpose-table { width: 100%; border-collapse: collapse; margin-top: var(--spacing); }
    .purpose-table th {
      text-align: left;
      padding-bottom: 0.5em;
      border-bottom: 1px solid #ddd;
      font-weight: bold;
    }
    .purpose-table td {
      padding: 0.25em 0;
      vertical-align: middle;
    }
    .purpose-table td:first-child { width: 2em; }
    .purpose-table td:nth-child(2) { padding-left: 0.5em; }

    .scroll-box {
      max-height: 240px;
      overflow-y: auto;
      background: #fafafa;
      padding: 0.75em;
      border: 1px solid #ddd;
      border-radius: 4px;
      white-space: normal;
      margin-top: 0.5em;
      font-size: 0.9rem;
      line-height: 1.4;
    }
    .scroll-box ul { margin: 0; padding-left: 1.2em; }
    .scroll-box li { margin-bottom: 0.5em; }

    .agree-container { text-align: center; margin-top: var(--spacing); }
    .agree-text { margin-bottom: 0.5em; font-weight: bold; }
    .agree-container input[type="checkbox"] {
      width: auto;
      display: block;
      margin: 0 auto var(--spacing);
      transform: scale(1.2);
    }

    .return-note {
      text-align: center;
      font-size: 0.9rem;
      margin-top: 0.5em;
    }

    .btn {
      background: var(--primary-color);
      color: #fff;
      border: none;
      cursor: pointer;
      font-size: 1rem;
      margin-top: var(--spacing);
      transition: background 0.2s;
    }
    .btn:disabled { background: #aaa; cursor: not-allowed; }
    .btn:hover:enabled { background: #00557a; }

    .btn-small {
      background: var(--primary-color);
      color: #fff;
      width: auto;
      padding: 0.5em;
      font-size: 0.9rem;
      margin-top: 0.5em;
    }
    .btn-small:hover { background: #00557a; }

    #msg {
      margin-top: var(--spacing);
      text-align: center;
      color: #d33;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <main>
    <h1 data-ja="来訪者受付フォーム" data-en="Visitor Check-in Form">
      来訪者受付フォーム
    </h1>
    <div id="langSwitch">
      <button type="button" onclick="setLang('ja')">日本語</button>
      <button type="button" onclick="setLang('en')">English</button>
    </div>

    <div id="facilityDisplay" class="facility-display">未設定</div>
    <input type="hidden" id="facility" name="facility" value="未設定" />

    <form id="visitorForm">
      <div class="datetime-row">
        <div class="datetime-field">
          <label for="visitDate" data-ja="ご来所日" data-en="Date of Visit">ご来所日</label>
          <input type="date" id="visitDate" name="visitDate" required />
        </div>
        <div class="datetime-field">
          <label for="visitTime" data-ja="ご来所時間" data-en="Time of Arrival">ご来所時間</label>
          <input type="time" id="visitTime" name="visitTime" required />
        </div>
      </div>

      <label for="leaveTime" data-ja="予定ご退所時間" data-en="Expected Departure">予定ご退所時間</label>
      <input type="time" id="leaveTime" name="leaveTime" />

      <label for="company" data-ja="貴社名（必須）" data-en="Company Name (required)">貴社名（必須）</label>
      <input type="text" id="company" name="company" required />

      <label data-ja="お名前・ビジターカード番号" data-en="Name & Visitor Card No.">お名前・ビジターカード番号</label>
      <div id="nameSection">
        <div class="name-pair">
          <input
            type="text"
            name="visitorName[]"
            placeholder="お名前"
            data-ja-placeholder="お名前"
            data-en-placeholder="Name"
            autocomplete="name"
            autocapitalize="words"
            inputmode="text"
            required
          />
          <input
            type="text"
            name="visitorCard[]"
            placeholder="VC No."
            data-ja-placeholder="VC No."
            data-en-placeholder="Card No."
            inputmode="numeric"
            pattern="[0-9]*"
            required
          />
        </div>
      </div>
      <button type="button" class="btn btn-small" onclick="addNamePair()">＋追加</button>


      <table class="purpose-table">
        <thead>
          <tr><th></th><th data-ja="ご来所目的（複数選択可）" data-en="Purpose of Visit (multiple)">ご来所目的（複数選択可）</th></tr>
        </thead>
        <tbody>
          <tr><td><input type="checkbox" name="purpose" value="調査・監査・見学"></td><td data-ja="調査・監査・見学" data-en="Inspection / Audit / Tour">調査・監査・見学</td></tr>
          <tr><td><input type="checkbox" name="purpose" value="打合せ"></td><td data-ja="打合せ（会議）" data-en="Meeting">打合せ（会議）</td></tr>
          <tr><td><input type="checkbox" name="purpose" value="納品・修理・清掃 他"></td><td data-ja="納品・修理・清掃 他" data-en="Delivery / Repair / Cleaning">納品・修理・清掃 他</td></tr>
        </tbody>
      </table>

      <label data-ja="【注意事項】（必読）" data-en="Notes (must read)">【注意事項】（必読）</label>
      <div class="scroll-box">
        <ul>
          <li data-ja="試験エリアには化学物質や有機溶媒が置かれています。それらに接触することにより眼や皮膚が障碍されたり、吸収されて健康被害を惹き起こす可能性があります。そのため、試験エリアに立ち入る際には肌の露出を避けた服装でご入室ください。また、化学物質等に接触の可能性が高い場合は保護具（マスク、ゴーグル、グローブ、白衣）を貸与いたしますので弊社社員にお申し付けください。" data-en="The testing area contains chemical substances and organic solvents that may harm eyes or skin upon contact and cause health issues. When entering the testing area, please wear clothing that avoids skin exposure. If there is a high risk of contact with chemicals, request protective equipment (mask, goggles, gloves, lab coat) from our staff.">試験エリアには化学物質や有機溶媒が置かれています。それらに接触することにより眼や皮膚が障碍されたり、吸収されて健康被害を惹き起こす可能性があります。そのため、試験エリアに立ち入る際には肌の露出を避けた服装でご入室ください。また、化学物質等に接触の可能性が高い場合は保護具（マスク、ゴーグル、グローブ、白衣）を貸与いたしますので弊社社員にお申し付けください。</li>
          <li data-ja="試験エリアには機器や設備が机上や足元に設置されています。それらに接触すると衣服が破れたり、怪我をする恐れがありますのでご注意願います。" data-en="Equipment and devices are installed on benches and floors in the testing area. Please be careful, as contacting them may tear clothing or cause injury.">試験エリアには機器や設備が机上や足元に設置されています。それらに接触すると衣服が破れたり、怪我をする恐れがありますのでご注意願います。</li>
          <li data-ja="試験エリアで作業される際には弊社の生産活動に支障をきたすことのないように安全には十分ご注意いただくとともに弊社社員の指示には必ず従っていただくようお願いします。" data-en="When working in the testing area, take all safety precautions to avoid disrupting our production activities and always follow the instructions of our staff.">試験エリアで作業される際には弊社の生産活動に支障をきたすことのないように安全には十分ご注意いただくとともに弊社社員の指示には必ず従っていただくようお願いします。</li>
          <li data-ja="サンプル（生体試料、原薬、製剤等）の保存エリアに立ち入る際は設置機器・設備の停止、誤操作、破損/汚損にご留意願います。異常発生時には速やかに弊署社員に連絡願います。また、本エリアの温度変動を最小限にするためドアの開閉は速やかにお願いします。" data-en="When entering the sample storage area (biological samples, APIs, formulations, etc.), be careful not to stop equipment incorrectly, operate it improperly, or cause damage/contamination. In case of any abnormality, contact our staff immediately. To minimize temperature deviations in this area, please open and close doors promptly.">サンプル（生体試料、原薬、製剤等）の保存エリアに立ち入る際は設置機器・設備の停止、誤操作、破損/汚損にご留意願います。異常発生時には速やかに弊署社員に連絡願います。また、本エリアの温度変動を最小限にするためドアの開閉は速やかにお願いします。</li>
          <li data-ja="急な発熱や体調不良が発生した場合は弊社社員への連絡をお願いします。また火災や災害時などの緊急時は弊社社員の指示に従って避難をお願いします。" data-en="If you experience sudden fever or feel unwell, please contact our staff. In case of fire or other emergencies, follow our staff's instructions for evacuation.">急な発熱や体調不良が発生した場合は弊社社員への連絡をお願いします。また火災や災害時などの緊急時は弊社社員の指示に従って避難をお願いします。</li>
          <li data-ja="施設内ではビジターカード(VC)をご着用願います。また指定場所以外での飲食はご遠慮願います。" data-en="Please wear your visitor card (VC) within the facility. Eating and drinking outside designated areas is prohibited.">施設内ではビジターカード(VC)をご着用願います。また指定場所以外での飲食はご遠慮願います。</li>
          <li data-ja="施設内で知り得た情報の第三者開示、写真撮影、動画撮影は禁止しますのでご了承願います。" data-en="Disclosure of information obtained within the facility to third parties, photography, and video recording are prohibited.">施設内で知り得た情報の第三者開示、写真撮影、動画撮影は禁止しますのでご了承願います。</li>
          <li data-ja="当方の一方的過失以外の事故などについては一切の 책임을負いかねます。事故防止には万全を期していただくようお願い申し上げます。" data-en="We accept no liability for any incidents other than our sole negligence. Please take all necessary precautions to prevent accidents.">当方の一方的過失以外の事故などについては一切の責任を負いかねます。事故防止には万全を期していただくようお願い申し上げます。</li>
        </ul>
      </div>

      <div class="agree-container">        <div class="agree-text" data-ja="上記注意事項を確認しました" data-en="I have read and agree to the above">
          上記注意事項を確認しました
        </div>
        <input type="checkbox" id="agree" name="agree" />
      </div>

      <div class="return-note" data-ja="お帰りの際は、ビジターカードを受付に返却してください" data-en="Please return your visitor card to reception upon leaving.">
        お帰りの際は、ビジターカードを受付に返却してください
      </div>

      <button type="submit" id="submitBtn" class="btn" disabled data-ja="送信" data-en="Submit">
        送信
      </button>
    </form>
    <p id="msg"></p>
  </main>

  <script>
    let lang = 'ja';
    function setLang(l) {
      lang = l;
      document.querySelectorAll('[data-ja]').forEach(el => {
        el.textContent = el.getAttribute(`data-${l}`);
        if (el.placeholder) {
          el.placeholder = el.getAttribute(`data-${l}-placeholder`) || el.placeholder;
        }
      });
    }

    const urlParams = new URLSearchParams(location.search);
    const fac = urlParams.get('facility') || '未設定';
    document.getElementById('facility').value = decodeURIComponent(fac);
    document.getElementById('facilityDisplay').textContent = decodeURIComponent(fac);

    const now = new Date();
    document.getElementById('visitDate').value = now.toISOString().slice(0,10);
    document.getElementById('visitTime').value = now.toTimeString().slice(0,5);

    function addNamePair() {
      const section = document.getElementById('nameSection');
      const count = section.querySelectorAll('.name-pair').length;
      if (count >= 5) return alert(lang==='en' ? 'Up to 5 entries' : '最大5名までです');

      const div = document.createElement('div');
      div.className = 'name-pair';
      div.innerHTML = `
        <input
          type="text"
          name="visitorName[]"
          placeholder="${lang==='en'?'Name':'お名前'}"
          data-ja-placeholder="お名前"
          data-en-placeholder="Name"
          autocomplete="name"
          autocapitalize="words"
          inputmode="text"
          required
        />
        <input
          type="text"
          name="visitorCard[]"
          placeholder="${lang==='en'?'Card No.':'VC No.'}"
          data-ja-placeholder="VC No."
          data-en-placeholder="Card No."
          inputmode="numeric"
          pattern="[0-9]*"
          required
        />
      `;
      section.appendChild(div);
    }

    document.getElementById('visitorForm').addEventListener('change', () => {
      document.getElementById('submitBtn').disabled = !document.getElementById('agree').checked;
    });
  </script>
</body>
</html>
