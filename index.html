<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>来訪者受付フォーム</title>
  <style>
    body { background: #f4f8fb; color: #222; font-family: "Segoe UI","Yu Gothic",sans-serif; margin:0;padding:0;}
    .visitor-list { margin-bottom: 0.7em; }
    .visitor-entry { display: flex; gap: 0.5em; margin-bottom:0.3em;}
    .visitor-entry input.visitor-card { flex: 1 1 0; min-width:60px; max-width:120px;}
    .visitor-entry input.visitor-name { flex: 2 1 0; min-width:90px;}
    .visitor-remove-btn { background: #e11d48; color: #fff; border:none; border-radius:0.7em; font-size:1em; padding:0.2em 1em; cursor:pointer;}
    .add-visitor-btn { background: #2563eb; color:#fff; border:none; border-radius:0.7em; font-size:1.1em; font-weight:bold; padding:0.5em 1.3em; cursor:pointer; margin-top:0.2em;}
    .error-msg { color: #e11d48; font-size:1em; margin:0.3em 0 0 0; display:none;}
    .submit-btn { margin-top:1em; background:#2563eb; color:#fff; border:none; border-radius:1.2em; font-size:1.2em; padding:1em; font-weight:bold; cursor:pointer;}
    .notice-scroll { max-height: 180px; overflow-y: auto; background: #e0e7ef; padding: 1em; border-radius: 0.8em; font-size: 1em; border: 1px solid #cbd5e1; margin-bottom: 0.5em; white-space: pre-line;}
  </style>
</head>
<body>
  <h1>来訪者受付フォーム</h1>
  <form id="visit-form" autocomplete="off">
    <div>ビジターカード番号・氏名<span style="color:#e11d48;">*</span></div>
    <div class="visitor-list" id="visitor-list"></div>
    <button type="button" class="add-visitor-btn" id="add-visitor-btn">＋ 追加</button>
    <div class="error-msg" id="error-visitors"></div>
    <div class="notice-scroll">
・試験エリアには化学物質や有機溶媒が置かれています。それらに接触することにより眼や皮膚が障害されたり、吸収されて健康被害を惹き起こす可能性があります。そのため、試験エリアに立ち入る際には、肌の露出を避ける服装でご入室してください。また、化学物質等に接触の可能性が高い場合は保護具（マスク、ゴーグル、グローブ、白衣）を貸与致しますので、弊社社員にお申し付けください。
・試験エリアには機器や設備が机上や足元に設置されています。それらに接触すると衣服が破れたり、けがをする恐れがありますのでご注意願います。
・試験エリアで作業される際には、弊社の生産活動に支障をきたすことのないように安全には十分ご注意いただくとともに、弊社社員の指示には必ず従っていただきますようお願いします。
・サンプル（生体試料、原薬、製剤等）の保存エリアに立ち入る際は、設置機器・設備の停止、誤操作、破損/汚損にご留意願います。異常発生時には速やかに弊社社員に連絡願います。また、本エリアの温度変動を最小限にするため、ドアの開閉は速やかにお願いします。
・急な発熱や体調不良が発生した場合は弊社社員への連絡をお願いします。また、火災や災害時などの緊急時は弊社社員の指示に従って避難をお願いします。
・施設内ではビジターカード(VC)をご着用願います。また、指定場所以外での飲食はご遠慮願います。
・施設内で知り得た情報の第三者開示、写真撮影、動画撮影は禁止しますのでご了承願います。
・当方の一方的過失以外の事故などについては、一切の責任を負いかねます。事故防止には万全を期していただくようお願い申し上げます。
    </div>
    <div>
      <input type="checkbox" id="notice-confirm" required>
      <label for="notice-confirm">注意事項を確認しました<span style="color:#e11d48;">*</span></label>
    </div>
    <div class="error-msg" id="error-notice"></div>
    <button type="submit" class="submit-btn">送信</button>
  </form>
  <script>
    document.addEventListener("DOMContentLoaded", function(){
      addVisitorEntry();
      document.getElementById("add-visitor-btn").addEventListener("click",()=>addVisitorEntry());
      document.getElementById("visit-form").addEventListener("submit",function(e){
        let ok = false;
        let vlist = document.getElementById("visitor-list");
        let error = document.getElementById("error-visitors");
        for(const row of vlist.children){
          const card = row.querySelector(".visitor-card").value.trim();
          const name = row.querySelector(".visitor-name").value.trim();
          if(card && name){ ok=true; break; }
        }
        if(!ok){
          error.textContent = "少なくとも1名のカード番号と氏名を入力してください。";
          error.style.display = "";
          e.preventDefault();
        }else{
          error.textContent = "";
          error.style.display = "none";
        }
        // 注意事項必須
        let noticeChk = document.getElementById("notice-confirm");
        let errNotice = document.getElementById("error-notice");
        if(!noticeChk.checked){
          errNotice.textContent = "注意事項を確認してください。";
          errNotice.style.display = "";
          e.preventDefault();
        }else{
          errNotice.textContent = "";
          errNotice.style.display = "none";
        }
      });
    });
    function addVisitorEntry() {
      const row = document.createElement("div");
      row.className = "visitor-entry";
      // 1. カード番号
      const cardInput = document.createElement("input");
      cardInput.type = "text";
      cardInput.className = "visitor-card";
      cardInput.placeholder = "カード番号";
      // 2. 氏名（type=text/IME優先）
      const nameInput = document.createElement("input");
      nameInput.type = "text";
      nameInput.className = "visitor-name";
      nameInput.placeholder = "氏名";
      // 削除
      const removeBtn = document.createElement("button");
      removeBtn.type = "button";
      removeBtn.className = "visitor-remove-btn";
      removeBtn.textContent = "削除";
      removeBtn.onclick = function() { row.remove(); };
      row.appendChild(cardInput);
      row.appendChild(nameInput);
      row.appendChild(removeBtn);
      document.getElementById("visitor-list").appendChild(row);
    }
  </script>
</body>
</html>
